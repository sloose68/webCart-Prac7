import{dO as c,kI as d,kJ as y,kK as m,kL as p,kM as b,ab as _,aa as g,kN as h,d as A,br as w,j1 as i,kO as B}from"./index-DO5zGDFy.js";import{f as I,A as R}from"./Indices-BmED5Jc-.js";function k(e,t){l(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function l(e,t,o=2,a=o){const n=t.length/2;let r=0,u=0;if(!c(t)||d(t)){for(let s=0;s<n;++s)e[r]=t[u],e[r+1]=t[u+1],r+=o,u+=a;return}const f=y(t);if(m(t))for(let s=0;s<n;++s)e[r]=Math.max(t[u]/f,-1),e[r+1]=Math.max(t[u+1]/f,-1),r+=o,u+=a;else for(let s=0;s<n;++s)e[r]=t[u]/f,e[r+1]=t[u+1]/f,r+=o,u+=a}function S(e,t,o,a){const n=e.typedBuffer,r=e.typedBufferStride,u=a?.count??e.count;let f=(a?.dstIndex??0)*r;for(let s=0;s<u;++s)n[f]=t,n[f+1]=o,f+=r}Object.freeze(Object.defineProperty({__proto__:null,fill:S,normalizeIntegerBuffer:l,normalizeIntegerBufferView:k},Symbol.toStringTag,{value:"Module"}));class ${constructor(t){this._streamDataRequester=t}async loadJSON(t,o){return this._load("json",t,o)}async loadBinary(t,o){return b(t)?(_(o),p(t)):this._load("binary",t,o)}async loadImage(t,o){return this._load("image",t,o)}async _load(t,o,a){if(this._streamDataRequester==null)return(await g(o,{responseType:j[t]})).data;const n=await h(this._streamDataRequester.request(o,t,a));if(n.ok===!0)return n.value;throw w(n.error),new A("glt-loader-request-error",`Request for resource failed: ${n.error}`)}}const j={image:"image",binary:"array-buffer",json:"json","image+type":void 0};function x(e,t){switch(t){case i.TRIANGLES:return q(e);case i.TRIANGLE_STRIP:return N(e);case i.TRIANGLE_FAN:return T(e)}}function q(e){return typeof e=="number"?R(e):B(e)?new Uint16Array(e):e}function N(e){const t=typeof e=="number"?e:e.length;if(t<3)return[];const o=t-2,a=I(3*o);if(typeof e=="number"){let n=0;for(let r=0;r<o;r+=1)r%2==0?(a[n++]=r,a[n++]=r+1,a[n++]=r+2):(a[n++]=r+1,a[n++]=r,a[n++]=r+2)}else{let n=0;for(let r=0;r<o;r+=1)r%2==0?(a[n++]=e[r],a[n++]=e[r+1],a[n++]=e[r+2]):(a[n++]=e[r+1],a[n++]=e[r],a[n++]=e[r+2])}return a}function T(e){const t=typeof e=="number"?e:e.length;if(t<3)return new Uint16Array(0);const o=t-2,a=o<=65536?new Uint16Array(3*o):new Uint32Array(3*o);if(typeof e=="number"){let f=0;for(let s=0;s<o;++s)a[f++]=0,a[f++]=s+1,a[f++]=s+2;return a}const n=e[0];let r=e[1],u=0;for(let f=0;f<o;++f){const s=e[f+2];a[u++]=n,a[u++]=r,a[u++]=s,r=s}return a}export{l as a,k as b,S as l,$ as n,x as o};
